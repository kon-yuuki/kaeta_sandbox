# Kaeta ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚¬ã‚¤ãƒ‰ï¼ˆãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼å‘ã‘ï¼‰

> **ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„**
> ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãŒKaetaã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ç†è§£ã—ã€AIãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚„ç”»é¢è¨­è¨ˆã«æ´»ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã€‚

---

## ğŸ“‹ ç›®æ¬¡

1. [3è¡Œã§ã‚ã‹ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ](#1-3è¡Œã§ã‚ã‹ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ )
2. [å…¨ä½“åƒï¼šãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§](#2-å…¨ä½“åƒãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§)
3. [æœ€é‡è¦ï¼šitems ã¨ todo_items ã®é•ã„](#3-æœ€é‡è¦items-ã¨-todo_items-ã®é•ã„)
4. [ç”»é¢ã¨ãƒ‡ãƒ¼ã‚¿ã®å¯¾å¿œ](#4-ç”»é¢ã¨ãƒ‡ãƒ¼ã‚¿ã®å¯¾å¿œ)
5. [ãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](#5-ãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)
6. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆæ“ä½œåˆ¥ï¼‰](#6-ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼æ“ä½œåˆ¥)
7. [ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](#7-ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)

---

## 1. 3è¡Œã§ã‚ã‹ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

| ãƒ†ãƒ¼ãƒ–ãƒ«å | å½¹å‰² | ä¸€è¨€ã§ |
|------------|------|--------|
| **items** | å•†å“ã®è¾æ›¸ | ã€Œç‰›ä¹³ã€ã¨ã„ã†å•†å“ã‚’è¦šãˆã¦ãŠãå ´æ‰€ |
| **todo_items** | è²·ã„ç‰©ãƒªã‚¹ãƒˆ | ã€Œä»Šæ—¥è²·ã†ç‰›ä¹³ã€ã‚’è¨˜éŒ²ã™ã‚‹å ´æ‰€ |
| **ãã®ä»–** | è£œåŠ©ãƒ‡ãƒ¼ã‚¿ | ã‚«ãƒ†ã‚´ãƒªã€å®¶æ—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šãªã© |

**è¦šãˆæ–¹ï¼š**
- `items` = **è¨˜æ†¶**ï¼ˆæ¬¡å›ã‚‚ä½¿ã†ï¼‰
- `todo_items` = **ä»Šå›ã®äºˆå®š**ï¼ˆç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰

---

## 2. å…¨ä½“åƒï¼šãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

### è²·ã„ç‰©ãƒªã‚¹ãƒˆç³»ï¼ˆ5ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

| ãƒ†ãƒ¼ãƒ–ãƒ« | ä½•ã‚’ä¿å­˜ã™ã‚‹ã‹ | ã„ã¤ä½¿ã†ã‹ |
|----------|----------------|------------|
| `todo_items` | ä»Šå›ã®è²·ã„ç‰©ãƒªã‚¹ãƒˆ | ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¡¨ç¤º |
| `items` | å•†å“ã®è¾æ›¸ï¼ˆå±¥æ­´ï¼‰ | å…¥åŠ›å€™è£œã€æ¬¡å›ã®å¾©å…ƒ |
| `categories` | ã‚«ãƒ†ã‚´ãƒªã®å®šç¾© | ã‚«ãƒ†ã‚´ãƒªé¸æŠè‚¢ |
| `purchase_history` | è³¼å…¥å±¥æ­´ | ã€Œæœ€è¿‘è²·ã£ãŸã‚‚ã®ã€è¡¨ç¤º |
| `master_items` | åˆæœŸå€™è£œãƒ‡ãƒ¼ã‚¿ | å±¥æ­´ãŒãªã„æ™‚ã®ã‚µã‚¸ã‚§ã‚¹ãƒˆ |

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ç³»ï¼ˆ1ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

| ãƒ†ãƒ¼ãƒ–ãƒ« | ä½•ã‚’ä¿å­˜ã™ã‚‹ã‹ | ã„ã¤ä½¿ã†ã‹ |
|----------|----------------|------------|
| `profiles` | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š | è¨­å®šç”»é¢ã€ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤º |

### å®¶æ—ç³»ï¼ˆ4ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

| ãƒ†ãƒ¼ãƒ–ãƒ« | ä½•ã‚’ä¿å­˜ã™ã‚‹ã‹ | ã„ã¤ä½¿ã†ã‹ |
|----------|----------------|------------|
| `families` | å®¶æ—ã‚°ãƒ«ãƒ¼ãƒ— | å®¶æ—åã®è¡¨ç¤º |
| `family_members` | èª°ãŒã©ã®å®¶æ—ã«å±ã™ã‚‹ã‹ | å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§ |
| `invitations` | æ‹›å¾…ãƒªãƒ³ã‚¯æƒ…å ± | å®¶æ—ã¸ã®æ‹›å¾…æ©Ÿèƒ½ |
| `family_boards` | å®¶æ—ãƒ¡ãƒ¢ | é€£çµ¡äº‹é …ã®å…±æœ‰ |

---

## 3. æœ€é‡è¦ï¼šitems ã¨ todo_items ã®é•ã„

### ãªãœ2ã¤ã«åˆ†ã‹ã‚Œã¦ã„ã‚‹ã®ã‹

**çµè«–ï¼šå½¹å‰²ãŒé•ã†ã‹ã‚‰**

| ãƒ†ãƒ¼ãƒ–ãƒ« | å½¹å‰² |
|----------|------|
| `items` | å•†å“ã®è¾æ›¸ï¼ˆäºˆç®—ã‚„é‡ã®æ—¢å®šå€¤ã‚’è¨˜æ†¶ï¼‰ |
| `todo_items` | ä»Šå›ã®è²·ã„ç‰©ãƒªã‚¹ãƒˆï¼ˆç”»é¢ã«è¡¨ç¤ºï¼‰ |

### è¿½åŠ æ™‚ã®å‹•ä½œ

```
åˆå›ï¼šã€Œç‰›ä¹³ã€ã‚’è¿½åŠ 
  â†’ items ã«ã€Œç‰›ä¹³ã€ã‚’æ–°è¦ä½œæˆ
  â†’ todo_items ã«ã€Œç‰›ä¹³ã€ã‚’æ–°è¦ä½œæˆ

2å›ç›®ï¼šã¾ãŸã€Œç‰›ä¹³ã€ã‚’è¿½åŠ 
  â†’ items ã¯æ—¢å­˜ã‚’å†åˆ©ç”¨
  â†’ todo_items ã‚‚æ—¢å­˜ãŒã‚ã‚Œã°å†åˆ©ç”¨ãƒ»æ›´æ–°ï¼ˆãªã‘ã‚Œã°æ–°è¦ä½œæˆï¼‰
```

**ãƒã‚¤ãƒ³ãƒˆï¼šãƒ‡ãƒ¼ã‚¿ãŒè‚¥å¤§åŒ–ã—ãªã„ã‚ˆã†ã€ä¸¡æ–¹ã¨ã‚‚æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å†åˆ©ç”¨ã™ã‚‹**

### å…·ä½“çš„ãªé•ã„

| è¦³ç‚¹ | itemsï¼ˆå•†å“è¾æ›¸ï¼‰ | todo_itemsï¼ˆè²·ã„ç‰©ãƒªã‚¹ãƒˆï¼‰ |
|------|-------------------|---------------------------|
| **å½¹å‰²** | å•†å“ã‚’è¦šãˆã¦ãŠã | ä»Šå›è²·ã†ã‚‚ã®ã‚’ç®¡ç† |
| **å¢—ãˆæ–¹** | æ–°ã—ã„å•†å“åã”ã¨ã«1ä»¶ | æœªå®Œäº†ã®åŒåãŒãªã‘ã‚Œã°1ä»¶ |
| **æ¶ˆãˆæ–¹** | åŸºæœ¬æ¶ˆãˆãªã„ | è³¼å…¥å®Œäº†ã§å®Œäº†æ¸ˆã¿ã«ãªã‚‹ |
| **ç”»é¢** | å…¥åŠ›å€™è£œã¨ã—ã¦è¡¨ç¤º | ãƒ›ãƒ¼ãƒ ç”»é¢ã®ãƒªã‚¹ãƒˆ |

### ä¾‹ï¼šç‰›ä¹³ã‚’è²·ã†æµã‚Œ

| æ“ä½œ | items | todo_items |
|------|-------|------------|
| åˆå›è¿½åŠ  | ã€Œç‰›ä¹³ã€1ä»¶ä½œæˆ | ã€Œç‰›ä¹³ã€1ä»¶ä½œæˆï¼ˆæœªå®Œäº†ï¼‰ |
| è³¼å…¥å®Œäº† | è³¼å…¥å›æ•°+1 | å®Œäº†æ¸ˆã¿ã«ãªã‚‹ |
| ç¿Œé€±è¿½åŠ  | æ—¢å­˜ã‚’å†åˆ©ç”¨ | ã€Œç‰›ä¹³ã€1ä»¶ä½œæˆï¼ˆæ–°è¦ã€æœªå®Œäº†ï¼‰ |
| åŒã˜æ—¥ã«ã¾ãŸè¿½åŠ  | æ—¢å­˜ã‚’å†åˆ©ç”¨ | æ—¢å­˜ã®æœªå®Œäº†ã‚’æ›´æ–° |

**ãƒã‚¤ãƒ³ãƒˆï¼š**
- åŒã˜å•†å“ã®æœªå®Œäº†ã‚¿ã‚¹ã‚¯ãŒæ—¢ã«ã‚ã‚Œã°ã€ãã‚Œã‚’æ›´æ–°ã™ã‚‹
- å®Œäº†æ¸ˆã¿ã®å ´åˆã¯æ–°è¦ä½œæˆã™ã‚‹

---

## 4. ç”»é¢ã¨ãƒ‡ãƒ¼ã‚¿ã®å¯¾å¿œ

### ç”»é¢ã”ã¨ã«ä½¿ã†ãƒ†ãƒ¼ãƒ–ãƒ«

| ç”»é¢ | èª­ã‚€ãƒ†ãƒ¼ãƒ–ãƒ« | æ›¸ããƒ†ãƒ¼ãƒ–ãƒ« |
|------|-------------|-------------|
| ãƒ›ãƒ¼ãƒ ï¼ˆãƒªã‚¹ãƒˆè¡¨ç¤ºï¼‰ | `todo_items`, `items`, `categories` | - |
| ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ  | `categories`, `items`, `master_items` | `items`, `todo_items` |
| ã‚¢ã‚¤ãƒ†ãƒ ç·¨é›† | `todo_items`, `items`, `categories` | `todo_items`, `items` |
| è³¼å…¥å®Œäº† | - | `todo_items`, `items`, `purchase_history` |
| ã‚«ãƒ†ã‚´ãƒªç·¨é›† | `categories` | `categories`, `items`, `todo_items` |
| è¨­å®š | `profiles` | `profiles` |
| å®¶æ—ç®¡ç† | `families`, `family_members` | `families`, `invitations` |

### å€‹äººãƒ‡ãƒ¼ã‚¿ã¨å®¶æ—ãƒ‡ãƒ¼ã‚¿ã®è¦‹åˆ†ã‘æ–¹

ã‚¢ãƒ—ãƒªã«ã¯ã€Œå€‹äººç”¨ã€ã¨ã€Œå®¶æ—å…±æœ‰ã€ã®2ã¤ã®ãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®¶æ—ã‚’é¸æŠã™ã‚‹ã¨ï¼š**
- ãã®å®¶æ—ã®è²·ã„ç‰©ãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- è¿½åŠ ã—ãŸã‚¢ã‚¤ãƒ†ãƒ ã¯å®¶æ—å…¨å“¡ã«è¦‹ãˆã‚‹

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œå€‹äººç”¨ãƒ¡ãƒ¢ã€ã‚’é¸æŠã™ã‚‹ã¨ï¼š**
- è‡ªåˆ†ã ã‘ã®è²·ã„ç‰©ãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- ä»–ã®äººã«ã¯è¦‹ãˆãªã„

#### ãƒ‡ãƒ¼ã‚¿ã®åˆ¤åˆ¥æ–¹æ³•

`family_id` ã‚«ãƒ©ãƒ ã®å€¤ã§åˆ¤åˆ¥ã—ã¾ã™ã€‚

| family_id ã®å€¤ | æ„å‘³ | èª°ã«è¦‹ãˆã‚‹ï¼Ÿ |
|----------------|------|-------------|
| `null`ï¼ˆç©ºï¼‰ | å€‹äººç”¨ãƒ‡ãƒ¼ã‚¿ | æœ¬äººã ã‘ |
| `abc-123...`ï¼ˆUUIDï¼‰ | å®¶æ—å…±æœ‰ãƒ‡ãƒ¼ã‚¿ | ãã®å®¶æ—ã®ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ |

#### ä¾‹ï¼šå¤ªéƒã•ã‚“ãŒã€Œå±±ç”°å®¶ã€ã§è²·ã„ç‰©ãƒªã‚¹ãƒˆã‚’ä½œã‚‹å ´åˆ

```
å¤ªéƒã•ã‚“ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
  â”” current_family_id = "yamada-family-uuid"ï¼ˆå±±ç”°å®¶ã‚’é¸æŠä¸­ï¼‰

å¤ªéƒã•ã‚“ãŒã€Œç‰›ä¹³ã€ã‚’è¿½åŠ 
  â”” todo_items ã«ä¿å­˜ã•ã‚Œã‚‹
    â”” family_id = "yamada-family-uuid"
    â”” user_id = "taro-uuid"

â†’ å±±ç”°å®¶ã®ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ã«ã€Œç‰›ä¹³ã€ãŒè¦‹ãˆã‚‹
```

#### ä¾‹ï¼šå¤ªéƒã•ã‚“ãŒå€‹äººãƒ¡ãƒ¢ã§è²·ã„ç‰©ãƒªã‚¹ãƒˆã‚’ä½œã‚‹å ´åˆ

```
å¤ªéƒã•ã‚“ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
  â”” current_family_id = nullï¼ˆå€‹äººç”¨ãƒ¡ãƒ¢ã‚’é¸æŠä¸­ï¼‰

å¤ªéƒã•ã‚“ãŒã€Œç‰›ä¹³ã€ã‚’è¿½åŠ 
  â”” todo_items ã«ä¿å­˜ã•ã‚Œã‚‹
    â”” family_id = null
    â”” user_id = "taro-uuid"

â†’ å¤ªéƒã•ã‚“ã ã‘ã«ã€Œç‰›ä¹³ã€ãŒè¦‹ãˆã‚‹
```

---

## 5. ãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ğŸ›’ è²·ã„ç‰©ãƒªã‚¹ãƒˆç³»

#### todo_itemsï¼ˆè²·ã„ç‰©ã‚¿ã‚¹ã‚¯ï¼‰â­æœ€é‡è¦

> ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹è²·ã„ç‰©ãƒªã‚¹ãƒˆã®å®Ÿä½“

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | ã‚¿ã‚¹ã‚¯ã®è­˜åˆ¥å­ | `abc-123...` |
| `item_id` | UUID / null | å•†å“è¾æ›¸ã¸ã®å‚ç…§ | `def-456...` |
| `name` | æ–‡å­—åˆ— | å•†å“å | `ç‰›ä¹³` |
| `category` | æ–‡å­—åˆ— | ã‚«ãƒ†ã‚´ãƒªå | `ä¹³è£½å“` |
| `category_id` | UUID / null | ã‚«ãƒ†ã‚´ãƒªã¸ã®å‚ç…§ | `ghi-789...` |
| `is_completed` | çœŸå½å€¤ | è³¼å…¥æ¸ˆã¿ã‹ | `false` |
| `priority` | æ•´æ•° | é‡è¦åº¦ï¼ˆ0=æ™®é€š, 1=é‡è¦, 2=æœ€é‡è¦ï¼‰ | `1` |
| `budget_min_amount` | æ•´æ•° / null | äºˆç®—ä¸‹é™ | `180` |
| `budget_max_amount` | æ•´æ•° / null | äºˆç®—ä¸Šé™ | `280` |
| `budget_type` | æ•´æ•° / null | 0=1ã¤ã‚ãŸã‚Š, 1=100gã‚ãŸã‚Š | `0` |
| `quantity_text` | æ–‡å­—åˆ— / null | é‡ã®å€¤ | `500` |
| `quantity_unit` | æ•´æ•° / null | 0=g, 1=mg, 2=ml | `2` |
| `quantity_count` | æ•´æ•° / null | å€‹æ•° | `1` |
| `user_id` | UUID | ä½œæˆè€… | `user-123...` |
| `family_id` | UUID / null | å®¶æ—IDï¼ˆnullãªã‚‰å€‹äººï¼‰ | `null` |
| `created_at` | æ—¥æ™‚ | è¿½åŠ æ—¥æ™‚ | `2024-01-15 10:30` |
| `completed_at` | æ—¥æ™‚ / null | å®Œäº†æ—¥æ™‚ | `null` |

#### itemsï¼ˆå•†å“è¾æ›¸ï¼‰

> å•†å“ã®å†åˆ©ç”¨ãƒ‡ãƒ¼ã‚¿ã€å€™è£œæ¤œç´¢ã€è³¼å…¥å›æ•°ã®é›†è¨ˆ

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | å•†å“ã®è­˜åˆ¥å­ | `abc-123...` |
| `name` | æ–‡å­—åˆ— | å•†å“å | `ç‰›ä¹³` |
| `reading` | æ–‡å­—åˆ— | ã²ã‚‰ãŒãªèª­ã¿ï¼ˆæ¤œç´¢ç”¨ï¼‰ | `ãã‚…ã†ã«ã‚…ã†` |
| `category` | æ–‡å­—åˆ— | ã‚«ãƒ†ã‚´ãƒªå | `ä¹³è£½å“` |
| `category_id` | UUID / null | ã‚«ãƒ†ã‚´ãƒªå‚ç…§ | `cat-123...` |
| `purchase_count` | æ•´æ•° | è³¼å…¥å›æ•° | `5` |
| `image_url` | URL / null | å•†å“ç”»åƒ | `https://...` |
| `budget_*` | - | äºˆç®—ã®æ—¢å®šå€¤ï¼ˆtodo_itemsã¨åŒã˜æ§‹é€ ï¼‰ | - |
| `quantity_*` | - | é‡ã®æ—¢å®šå€¤ï¼ˆtodo_itemsã¨åŒã˜æ§‹é€ ï¼‰ | - |
| `user_id` | UUID | æ‰€æœ‰è€… | `user-123...` |
| `family_id` | UUID / null | å®¶æ—ID | `null` |

#### categoriesï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | ã‚«ãƒ†ã‚´ãƒªID | `cat-123...` |
| `name` | æ–‡å­—åˆ— | ã‚«ãƒ†ã‚´ãƒªå | `é‡èœ` |
| `user_id` | UUID | ä½œæˆè€… | `user-123...` |
| `family_id` | UUID / null | å®¶æ—ID | `null` |

#### purchase_historyï¼ˆè³¼å…¥å±¥æ­´ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | å±¥æ­´ID | `hist-123...` |
| `item_id` | UUID / null | å•†å“ã¸ã®å‚ç…§ | `item-123...` |
| `name` | æ–‡å­—åˆ— | å•†å“å | `ç‰›ä¹³` |
| `last_purchased_at` | æ—¥æ™‚ | æœ€å¾Œã«è²·ã£ãŸæ—¥æ™‚ | `2024-01-15 10:30` |
| `user_id` | UUID | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | `user-123...` |
| `family_id` | UUID / null | å®¶æ—ID | `null` |

#### master_itemsï¼ˆåˆæœŸå€™è£œï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | ID | `master-123...` |
| `name` | æ–‡å­—åˆ— | å•†å“å | `ç‰›ä¹³` |
| `reading` | æ–‡å­—åˆ— | ã²ã‚‰ãŒãªèª­ã¿ | `ãã‚…ã†ã«ã‚…ã†` |

---

### ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç³»

#### profilesï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | `user-123...` |
| `display_name` | æ–‡å­—åˆ— / null | è¡¨ç¤ºå | `ãŸã‚ã†` |
| `current_family_id` | UUID / null | ç¾åœ¨é¸æŠä¸­ã®å®¶æ— | `family-123...` |
| `avatar_preset` | æ–‡å­—åˆ— / null | ãƒ—ãƒªã‚»ãƒƒãƒˆã‚¢ãƒã‚¿ãƒ¼ | `img_Men01.png` |
| `avatar_url` | URL / null | ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒã‚¿ãƒ¼ | `https://...` |
| `onboarding_completed` | çœŸå½å€¤ | åˆæœŸè¨­å®šå®Œäº† | `true` |
| `updated_at` | æ—¥æ™‚ | æ›´æ–°æ—¥æ™‚ | `2024-01-15 10:30` |

---

### ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶æ—ç³»

#### familiesï¼ˆå®¶æ—ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | å®¶æ—ID | `family-123...` |
| `name` | æ–‡å­—åˆ— | å®¶æ—å | `å±±ç”°å®¶` |
| `owner_id` | UUID | ä½œæˆè€… | `user-123...` |

#### family_membersï¼ˆå®¶æ—æ‰€å±ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | ID | `member-123...` |
| `user_id` | UUID | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | `user-123...` |
| `family_id` | UUID | å®¶æ— | `family-123...` |

#### invitationsï¼ˆæ‹›å¾…ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | æ‹›å¾…ã‚³ãƒ¼ãƒ‰ | `invite-123...` |
| `family_id` | UUID | æ‹›å¾…å…ˆã®å®¶æ— | `family-123...` |
| `inviter_id` | UUID | æ‹›å¾…ã—ãŸäºº | `user-123...` |
| `expires_at` | æ—¥æ™‚ | æœ‰åŠ¹æœŸé™ | `2024-01-20 10:30` |

#### family_boardsï¼ˆå®¶æ—ãƒ¡ãƒ¢ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ | ä¾‹ |
|--------|-----|------|-----|
| `id` | UUID | ãƒ¡ãƒ¢ID | `board-123...` |
| `family_id` | UUID / null | å®¶æ—ID | `family-123...` |
| `user_id` | UUID / null | å€‹äººãƒ¡ãƒ¢ã®å ´åˆã®æ‰€æœ‰è€… | `null` |
| `message` | æ–‡å­—åˆ— | ãƒ¡ãƒ¢æœ¬æ–‡ | `é†¤æ²¹è²·ã£ã¦` |
| `updated_by` | UUID / null | æœ€çµ‚æ›´æ–°è€… | `user-123...` |
| `updated_at` | æ—¥æ™‚ | æ›´æ–°æ—¥æ™‚ | `2024-01-15 10:30` |

---

## 6. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆæ“ä½œåˆ¥ï¼‰

### ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ ã™ã‚‹

```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œç‰›ä¹³ã€ã‚’è¿½åŠ ]
          â†“
[1] items ã‚’ã€Œç‰›ä¹³ã€ã§æ¤œç´¢
    ã‚ã‚‹ï¼Ÿ â†’ æ—¢å­˜ã‚’å†åˆ©ç”¨
    ãªã„ï¼Ÿ â†’ æ–°è¦ä½œæˆ
          â†“
[2] todo_items ã‚’ã€Œç‰›ä¹³ã€ã§æ¤œç´¢ï¼ˆæœªå®Œäº†ã®ã¿ï¼‰
    ã‚ã‚‹ï¼Ÿ â†’ æ—¢å­˜ã‚’æ›´æ–°
    ãªã„ï¼Ÿ â†’ æ–°è¦ä½œæˆ
          â†“
[ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹]
```

**ãƒã‚¤ãƒ³ãƒˆï¼š** åŒã˜å•†å“ã®æœªå®Œäº†ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Œã°æ›´æ–°ã€ãªã‘ã‚Œã°æ–°è¦ä½œæˆ

### ã‚¢ã‚¤ãƒ†ãƒ ã‚’ç·¨é›†ã™ã‚‹

```
[ç·¨é›†ç”»é¢ã‚’é–‹ã]
          â†“
[1] todo_items ã‹ã‚‰ç¾åœ¨ã®å€¤ã‚’èª­ã‚€
          â†“
[ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç·¨é›†ã—ã¦ä¿å­˜]
          â†“
[2] todo_items ã‚’æ›´æ–°ï¼ˆç”»é¢ã«ã™ãåæ˜ ï¼‰
[3] items ã‚‚æ›´æ–°ï¼ˆæ¬¡å›ã®å€™è£œã«åæ˜ ï¼‰
```

### è³¼å…¥å®Œäº†ã«ã™ã‚‹

```
[å®Œäº†ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—]
          â†“
[1] todo_items.is_completed = true
[2] todo_items.completed_at = ä»Šã®æ™‚åˆ»
[3] items.purchase_count ã‚’ +1
[4] purchase_history ã‚’æ›´æ–°
          â†“
[ãƒªã‚¹ãƒˆã‹ã‚‰æ¶ˆãˆã‚‹]
```

### ã‚«ãƒ†ã‚´ãƒªã‚’ç·¨é›†ã™ã‚‹

```
[ã‚«ãƒ†ã‚´ãƒªåã‚’ã€Œé‡èœã€â†’ã€Œæ–°é®®é‡èœã€ã«å¤‰æ›´]
          â†“
[1] categories.name ã‚’æ›´æ–°
[2] items.category ã‚’æ›´æ–°ï¼ˆãã®ã‚«ãƒ†ã‚´ãƒªã®å•†å“ã™ã¹ã¦ï¼‰
[3] todo_items.category ã‚’æ›´æ–°ï¼ˆãã®ã‚«ãƒ†ã‚´ãƒªã®ã‚¿ã‚¹ã‚¯ã™ã¹ã¦ï¼‰
```

### ã‚«ãƒ†ã‚´ãƒªã‚’å‰Šé™¤ã™ã‚‹

```
[ã‚«ãƒ†ã‚´ãƒªã€Œé‡èœã€ã‚’å‰Šé™¤]
          â†“
[1] items ã® category_id ã‚’ null ã«ã€category ã‚’ã€ŒæŒ‡å®šãªã—ã€ã«
[2] todo_items ã® category_id ã‚’ null ã«ã€category ã‚’ã€ŒæŒ‡å®šãªã—ã€ã«
[3] categories ã‹ã‚‰å‰Šé™¤
```

---

## 7. ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ã‚ˆãä½¿ã†ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

**ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ æ™‚ã«é€ã‚‹ãƒ‡ãƒ¼ã‚¿**
```json
{
  "name": "ç‰›ä¹³",
  "category": "ä¹³è£½å“",
  "category_id": "cat-uuid",
  "priority": 1,
  "budget_min_amount": 180,
  "budget_max_amount": 280,
  "budget_type": 0,
  "quantity_text": "500",
  "quantity_unit": 2,
  "quantity_count": 1
}
```

**ãƒªã‚¹ãƒˆè¡¨ç¤ºç”¨ã«åŠ å·¥ã—ãŸãƒ‡ãƒ¼ã‚¿**
```json
{
  "id": "todo-uuid",
  "name": "ç‰›ä¹³",
  "category_name": "ä¹³è£½å“",
  "priority": 1,
  "is_completed": false,
  "budget_label": "180ã€œ280å††/1ã¤",
  "quantity_label": "500ml",
  "count_label": "x1",
  "image_url": null
}
```

### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«

| é …ç›® | ãƒ«ãƒ¼ãƒ« |
|------|--------|
| `name` | ç©ºæ–‡å­—ä¸å¯ã€15æ–‡å­—ä»¥å†… |
| `budget_min_amount` | `budget_max_amount` ä»¥ä¸‹ |
| `quantity_*` | è² æ•°ä¸å¯ |
| `quantity_text` ã‚’ä½¿ã†å ´åˆ | `quantity_unit` ã‚‚å¿…é ˆ |

### å®Ÿè£…ã®æ¨å¥¨é †åº

| é †ç•ª | ä½œã‚‹ã‚‚ã® | ä½¿ã†ãƒ†ãƒ¼ãƒ–ãƒ« |
|------|----------|-------------|
| 1 | ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆãƒªã‚¹ãƒˆè¡¨ç¤ºï¼‰ | `todo_items` + `categories` ã‚’èª­ã‚€ |
| 2 | ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ  | `items` â†’ `todo_items` ã®é †ã§æ›¸ã |
| 3 | ã‚¢ã‚¤ãƒ†ãƒ ç·¨é›† | `todo_items` + `items` ã‚’æ›´æ–° |
| 4 | è³¼å…¥å®Œäº† | `todo_items` + `purchase_history` + `items` ã‚’æ›´æ–° |
| 5 | ã‚«ãƒ†ã‚´ãƒªç·¨é›† | `categories` ã¨é–¢é€£ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸ |
| 6 | å±¥æ­´ã‹ã‚‰å†è¿½åŠ  | `purchase_history` â†’ `todo_items` |

---

## ğŸ“ ã¾ã¨ã‚

### è¦šãˆã¦ãŠãã¹ã3ã¤ã®ã“ã¨

| ãƒã‚¤ãƒ³ãƒˆ | å†…å®¹ |
|----------|------|
| **1. items ã¨ todo_items** | `items` = å•†å“è¾æ›¸ï¼ˆè¨˜æ†¶ï¼‰ã€`todo_items` = è²·ã„ç‰©ãƒªã‚¹ãƒˆï¼ˆä»Šå›ã®äºˆå®šï¼‰ |
| **2. family_id** | `null` = å€‹äººç”¨ã€UUID = å®¶æ—å…±æœ‰ |
| **3. ã‚«ãƒ†ã‚´ãƒªã¯3ç®‡æ‰€** | `categories`ï¼ˆå®šç¾©ï¼‰ã€`items.category`ã€`todo_items.category` |

### å›°ã£ãŸã¨ãã¯

| ç—‡çŠ¶ | ç¢ºèªã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ« |
|------|-----------------|
| ç”»é¢ã«è¡¨ç¤ºã•ã‚Œãªã„ | `todo_items` |
| å…¥åŠ›å€™è£œã«å‡ºã¦ã“ãªã„ | `items` |
| ã‚«ãƒ†ã‚´ãƒªåãŒãšã‚Œã‚‹ | `categories`, `items`, `todo_items` ã®3ç®‡æ‰€ã‚’ç¢ºèª |
